option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: cocktaildb.settings
    PYTHONPATH: "/var/app/current:$PYTHONPATH" # Still useful for Python paths inside the container
    DJANGO_DEBUG: "False"
    DJANGO_SECRET_KEY: "your_django_secret_key_from_secrets"
    # Add any other environment variables your Django app needs
    # (e.g., database credentials if not using an attached RDS, S3 bucket names, etc.)

container_commands:
  # These commands run on the EC2 instance *before* your Docker container starts.
  # They run only once per instance during deployment.
  01_migrate:
    command: "python manage.py migrate --noinput"
    leader_only: true

  02_collectstatic:
    command: "python manage.py collectstatic --noinput"
    leader_only: true